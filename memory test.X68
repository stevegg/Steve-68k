;
; Homebrew 68k Memtest
; Copyright (C) 2021 Neil Klingensmith.  All Rights Reserved.
;
; Permission is hereby granted, free of charge, to any person obtaining a copy of
; this software and associated documentation files (the "Software"), to deal in
; the Software without restriction, including without limitation the rights to
; use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
; the Software, and to permit persons to whom the Software is furnished to do so,
; subject to the following conditions:
;
; The above copyright notice and this permission notice shall be included in all
; copies or substantial portions of the Software.
;
; THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
; IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
; FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
; COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
; IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
; CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
;
; https://neilklingensmith.com/teaching/68khomebrew/
;
; 1 tab == 4 spaces!



    ORG 0
; VECTOR TABLE
    DC.L STACK
    DC.L _START
    DC.L DUMMYHANDLER ; BUS ERROR
    DC.L DUMMYHANDLER ; ADDRESS ERROR
    DC.L DUMMYHANDLER ; ILLEGAL INSTRUCTION
    DC.L DUMMYHANDLER ; DIVIDE BY ZERO
    DC.L DUMMYHANDLER ; CHK EXCEPTION
    DC.L DUMMYHANDLER ; TRAPV
    DC.L DUMMYHANDLER ; PRIVILEGE VIOLATION
    DC.L DUMMYHANDLER ; TRACE
    DC.L DUMMYHANDLER ; LINE-A INSTRUCTION
    DC.L DUMMYHANDLER ; LINE-F INSTRUCTION
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; CO-PROCESSOR PROTOCOL VIOLATION
    DC.L DUMMYHANDLER ; FORMAT ERROR
    DC.L DUMMYHANDLER ; UNINITIALIZED INTERRUPT
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; SPURIOUS INTERRUPT
    DC.L DUMMYHANDLER ; IRQ1
    DC.L DUMMYHANDLER ; IRQ2
    DC.L DUMMYHANDLER ; IRQ3
    DC.L DUMMYHANDLER ; IRQ4
    DC.L DUMMYHANDLER ; IRQ5
    DC.L DUMMYHANDLER ; IRQ6
    DC.L DUMMYHANDLER ; IRQ7
    DC.L DUMMYHANDLER ; TRAP 0
    DC.L DUMMYHANDLER ; TRAP 1
    DC.L DUMMYHANDLER ; TRAP 2
    DC.L DUMMYHANDLER ; TRAP 3
    DC.L DUMMYHANDLER ; TRAP 4
    DC.L DUMMYHANDLER ; TRAP 5
    DC.L DUMMYHANDLER ; TRAP 6
    DC.L DUMMYHANDLER ; TRAP 7
    DC.L DUMMYHANDLER ; TRAP 8
    DC.L DUMMYHANDLER ; TRAP 9
    DC.L DUMMYHANDLER ; TRAP 10
    DC.L DUMMYHANDLER ; TRAP 11
    DC.L DUMMYHANDLER ; TRAP 12
    DC.L DUMMYHANDLER ; TRAP 13
    DC.L DUMMYHANDLER ; TRAP 14
    DC.L DUMMYHANDLER ; TRAP 15
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; RESERVED
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS
    DC.L DUMMYHANDLER ; USER INTERRUPTS




    
    ORG $400

_START:


MAIN_OUTER_LOOP:
    LEA $80000,A0         ; Put base address of RAM in A0

MAIN_LOOP:
    CLR.B (A0)            ; Clear mem location
    TST.B (A0)+           ; Check if mem location reads as zero
    BEQ MOVE_ON           ; If zero, assume write bus cycle succeeded
    CLR.B $180000         ; In not zero, something went wrong. Assert a chip select for high mem address.

MOVE_ON:
    CMPA.L #$3FFFF,A0
    BLT MAIN_LOOP
    BRA MAIN_OUTER_LOOP

DUMMYHANDLER:
    BRA DUMMYHANDLER
    RTE




    ORG $100000
STACK:
    
    
    END _START




*~Font name~Courier New~
*~Font size~14~
*~Tab type~1~
*~Tab size~4~

*~Font name~Courier New~
*~Font size~10~
*~Tab type~1~
*~Tab size~4~
